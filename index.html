<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ”’ ÙˆØµÙˆÙ„ Ù…Ø­Ù…ÙŠ</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body { font-family: Arial; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; background:#f0f2f5;}
.container { text-align:center; padding:30px; border-radius:15px; background:white; box-shadow:0 10px 30px rgba(0,0,0,0.2);}
h2 { color:#2A9DF4;}
.error { color:red; }
</style>
</head>
<body>
<div class="container" id="content">
<h2>ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</h2>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

// ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ù† Telegram WebApp
const user = tg.initDataUnsafe && tg.initDataUnsafe.user ? tg.initDataUnsafe.user : null;

// Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„Ù JSON Ø¹Ù„Ù‰ GitHub (Raw URL)
const allowedIDsUrl = "https://raw.githubusercontent.com/hamedareqi/EnglishQuiz/refs/heads/main/allowed.json";

fetch(allowedIDsUrl)
  .then(res => res.json())
  .then(data => {
    const ids = data.allowed_ids;
    const contentDiv = document.getElementById("content");

    if(user && ids.includes(user.id)) {
      contentDiv.innerHTML = `<h2>ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ ${user.first_name}</h2>
                              <p>ØªÙ… Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„</p>`;
      // Ø¶Ø¹ Ù‡Ù†Ø§ Ø¨Ø§Ù‚ÙŠ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    } else {
      contentDiv.innerHTML = `<h2 class="error">âŒ Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø¥Ø°Ù† Ù„Ù„ÙˆØµÙˆÙ„</h2>
                              <p>ÙŠØ¬Ø¨ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ù…Ù† Ø¯Ø§Ø®Ù„ Telegram WebApp Ø¨Ù…Ø³ØªØ®Ø¯Ù… Ù…ØµØ±Ø­ Ù„Ù‡.</p>`;
    }
  })
  .catch(err => {
    console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© IDs:", err);
    document.getElementById("content").innerHTML = `<h2 class="error">Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹</h2>`;
  });
</script>
</body>
</html>
